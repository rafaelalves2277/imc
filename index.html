<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stick Fight</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }

        #gameArea {
            position: relative;
            width: 800px;
            height: 400px;
            border: 2px solid #000;
            overflow: hidden;
            background-color: #fff;
        }

        .stick-figure {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.1s ease;
        }

        .head {
            width: 20px;
            height: 20px;
            background-color: black;
            border-radius: 50%;
        }

        .body {
            width: 5px;
            height: 50px;
            background-color: black;
        }

        .arm {
            width: 5px;
            height: 30px;
            background-color: black;
            position: absolute;
            bottom: 30px;
        }

        .sword {
            width: 3px;
            height: 40px;
            background-color: silver;
            position: absolute;
            transform: translateX(-50%) rotate(-30deg);
            bottom: 30px;
            display: none;
        }

        #player1 {
            left: 100px;
            bottom: 50px;
        }

        #player2 {
            left: 700px;
            bottom: 50px;
        }

        .attack {
            animation: punch 0.3s forwards;
        }

        @keyframes punch {
            0% { transform: translateX(0); }
            50% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }

        .sword-animation {
            animation: swing 0.5s forwards;
        }

        @keyframes swing {
            0% { transform: rotate(-30deg); }
            100% { transform: rotate(30deg); }
        }

        .walk {
            animation: walk 0.5s forwards;
        }

        @keyframes walk {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }

        .health-bar {
            width: 100%;
            height: 10px;
            background-color: red;
            position: absolute;
            top: -20px;
        }

        .health {
            height: 100%;
            background-color: green;
        }
    </style>
</head>
<body>
    <div id="gameArea">
        <div id="player1" class="stick-figure">
            <div class="health-bar"><div class="health" id="health1"></div></div>
            <div class="head"></div>
            <div class="body"></div>
            <div class="arm" style="transform: rotate(45deg);"></div>
            <div class="arm" style="transform: rotate(-45deg); bottom: 0;"></div>
            <div class="sword" id="sword1"></div>
        </div>
        <div id="player2" class="stick-figure">
            <div class="health-bar"><div class="health" id="health2"></div></div>
            <div class="head"></div>
            <div class="body"></div>
            <div class="arm" style="transform: rotate(45deg);"></div>
            <div class="arm" style="transform: rotate(-45deg); bottom: 0;"></div>
            <div class="sword" id="sword2"></div>
        </div>
    </div>
    <script>
        const player1 = document.getElementById('player1');
        const player2 = document.getElementById('player2');
        const sword1 = document.getElementById('sword1');
        const sword2 = document.getElementById('sword2');
        const health1 = document.getElementById('health1');
        const health2 = document.getElementById('health2');

        let player1Position = { x: 100, y: 50 };
        let player2Position = { x: 700, y: 50 };
        let player1Health = 100;
        let player2Health = 100;

        document.addEventListener('keydown', (event) => {
            switch (event.key) {
                case 'ArrowUp':
                    movePlayer1(0, 10);
                    break;
                case 'ArrowDown':
                    movePlayer1(0, -10);
                    break;
                case 'ArrowLeft':
                    movePlayer1(-10, 0);
                    break;
                case 'ArrowRight':
                    movePlayer1(10, 0);
                    break;
                case '1': // Ataque Player 1
                    attackPlayer1();
                    break;
                case '2': // Puxar espada Player 1
                    equipSword1();
                    break;
                case 'w': // Mover Player 2 para cima
                    movePlayer2(0, 10);
                    break;
                case 's': // Mover Player 2 para baixo
                    movePlayer2(0, -10);
                    break;
                case 'a': // Mover Player 2 para a esquerda
                    movePlayer2(-10, 0);
                    break;
                case 'd': // Mover Player 2 para a direita
                    movePlayer2(10, 0);
                    break;
                case 'j': // Ataque Player 2
                    attackPlayer2();
                    break;
                case 'k': // Puxar espada Player 2
                    equipSword2();
                    break;
            }
        });

        function movePlayer1(dx, dy) {
            player1Position.x += dx;
            player1Position.y += dy;
            updatePlayer1Position();
            player1.classList.add('walk');
            setTimeout(() => player1.classList.remove('walk'), 500);
        }

        function movePlayer2(dx, dy) {
            player2Position.x += dx;
            player2Position.y += dy;
            updatePlayer2Position();
            player2.classList.add('walk');
            setTimeout(() => player2.classList.remove('walk'), 500);
        }

        function updatePlayer1Position() {
            player1.style.left = player1Position.x + 'px';
            player1.style.bottom = player1Position.y + 'px';
        }

        function updatePlayer2Position() {
            player2.style.left = player2Position.x + 'px';
            player2.style.bottom = player2Position.y + 'px';
        }

        function attackPlayer1() {
            player1.classList.add('attack');
            sword1.classList.add('sword-animation');
            sword1.style.display = 'block';
            setTimeout(() => {
                sword1.classList.remove('sword-animation');
                sword1.style.display = 'none';
                // Verificar se atinge o Player 2
                if (isHit(player1Position, player2Position)) {
                    player2Health -= 20;
                    updateHealthBar(health2, player2Health);
                }
            }, 500);
            console.log("Player 1 ataca!");
        }

        function equipSword1() {
            sword1.style.display = 'block';
            sword1.style.left = (player1Position.x + 10) + 'px';
            sword1.style.bottom = (player1Position.y + 20) + 'px';
            console.log("Player 1 puxou a espada!");
        }

        function attackPlayer2() {
            player2.classList.add('attack');
            sword2.classList.add('sword-animation');
            sword2.style.display = 'block';
            setTimeout(() => {
                sword2.classList.remove('sword-animation');
                sword2.style.display = 'none';
                // Verificar se atinge o Player 1
                if (isHit(player2Position, player1Position)) {
                    player1Health -= 20;
                    updateHealthBar(health1, player1Health);
                }
            }, 500);
            console.log("Player 2 ataca!");
        }

        function equipSword2() {
            sword2.style.display = 'block';
            sword2.style.left = (player2Position.x - 10) + 'px';
            sword2.style.bottom = (player2Position.y + 20) + 'px';
            console.log("Player 2 puxou a espada!");
        }

        function isHit(attackerPos, defenderPos) {
            // Simples detecção de colisão
            const attackerRange = 40; // Alcance do ataque
            return (
                attackerPos.x < defenderPos.x + 40 &&
                attackerPos.x + 40 > defenderPos.x &&
                attackerPos.y < defenderPos.y + 70 &&
                attackerPos.y + 70 > defenderPos.y
            );
        }

        function updateHealthBar(healthBar, health) {
            const healthPercentage = health < 0 ? 0 : health;
            healthBar.style.width = healthPercentage + '%';
        }
    </script>
</body>
</html>
